# Codex 代码功能回顾与说明文档生成提示词（可复用）

## 使用目的
本提示词用于 **定期代码回顾**。  
目标不是理解每一行实现，而是从「功能与职责」角度，总结当前项目的整体结构、各模块作用、以及关键设计约束，生成一份**可留档的说明文档**。

每次执行本提示词时：
- Codex 必须阅读当前仓库中的代码与文档
- 生成一份新的“代码功能回顾说明文档”
- 文档需按时间留档，保存到指定路径

---

## 执行指令（交给 Codex）

你现在需要对当前代码仓库进行一次**功能级代码回顾**，并生成一份说明文档。  
请严格遵守以下要求。

### 1. 阅读范围（必须）
请先通读并理解以下内容（以仓库实际存在为准）：
- README.md / 项目入口说明文档
- AI_INDEX.md（如存在）
- docs/ 目录下的所有说明性文档（尤其是 TODO、设计说明）
- 后端主要模块代码（不需要逐行分析）
- 配置模板与 system prompt 文件（如 config_template.json、context_full.txt）

你的理解应以**文档为主、代码为辅**。

---

### 2. 回顾视角（非常重要）
请**只从功能和职责角度总结**，避免陷入具体实现细节。

允许的视角包括：
- 这个项目整体在“做什么”
- 当前支持了哪些核心功能
- 各主要模块各自负责什么
- 数据是如何流转的（高层次）
- 有哪些被刻意“限制/锁死”的设计（例如 GM 身份锁、上下文策略）
- 哪些能力是 V0 现状，哪些是明确的后续扩展点

禁止的内容：
- 逐函数、逐类解释
- 大量代码片段
- 推测不存在的功能

---

### 3. 生成文档的结构（必须遵守）
生成的说明文档必须包含以下章节（标题可微调，但结构要完整）：

1. 项目定位与目标  
2. 当前已实现的核心功能（V0 视角）  
3. 会话 / 上下文系统的功能性说明  
4. 角色与身份设计（GM / PC / NPC 的职责边界）  
5. 配置与可扩展点概览  
6. 当前刻意未实现或被延后的能力  
7. 后续演进方向（基于已有 TODO 文档，而不是你自行幻想）

---

### 4. 输出与留档规则（关键）
- 输出 **一份完整的 Markdown 文档**
- 文件命名格式：
  ```
  CODE_REVIEW_YYYY-MM-DD.md
  ```
- 保存路径（如目录不存在请创建）：
  ```
  docs/reviews/
  ```
- 文档必须是**可长期阅读的说明文档**，而不是临时总结

---

### 5. 风格要求
- 使用清晰、偏技术说明的语言
- 面向“未来的自己或协作者”
- 不使用口语
- 不使用“你/我”，而使用中性描述

---

### 6. 最后自检
在完成文档前，请确认：
- 文档不依赖读者阅读代码即可理解系统在做什么
- 文档能作为“阶段性系统说明”单独存在
- 文档内容与当前仓库状态一致，不超前设计

---

## 现在开始执行
请按照以上要求完成代码回顾，并将生成的文档保存到指定路径。
