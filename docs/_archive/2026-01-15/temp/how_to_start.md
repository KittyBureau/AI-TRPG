Codex 提示词：整理当前进度下的完整游玩流程（最小可玩版）



你的任务：基于现有仓库与文档，整理一份**“现在就能玩”的游玩流程说明**。

优先级：能玩 ＞ 清晰 ＞ 准确 ＞ 漂亮

禁止：引入未来规划、复杂上下文机制、未实现系统。



0️⃣ 工作前置（你需要先做）



只读检查仓库结构



backend/（FastAPI 后端）



frontend/public/（静态前端）



backend/storage/（版本化数据）



data/（运行期数据，gitignored）



docs/（尤其是路由/上下文测试相关文档）



以代码为准列出当前已存在接口



对话：/turn、/api/chat/send



角色：/api/characters/*



世界：/api/world/*



输出目标



生成一份文档：docs/PLAY_GUIDE_MIN.md



面向对象：第一次接触该项目的人（玩家 / 开发者皆可）



不要求修改代码，除非发现“完全无法游玩”的阻塞点



1️⃣ 文档结构（必须包含）

A. 我现在“已经能玩到什么”



用 5–10 条 bullet 描述当前可以做的事



明确指出 暂时不能做的事（如：战斗、技能检定、复杂物品等）



目的：防止读者误解当前阶段能力



B. 当前阶段的规则定义（最小规则集）



必须解释清楚：



GM 是谁



GM = 系统 + 代码裁决



模型不拥有最终裁判权



哪些信息会喂给模型



system prompt 的来源



角色信息 / 世界状态 / 历史对话的基本注入方式（只描述现状）



最小回合规则



玩家输入一句自然语言



系统解析意图



若触发世界行为（如移动），由代码执行并更新状态



返回结果，进入下一回合



⚠️ 不要写：摘要、pin、context budget 等未来机制



C. 角色创建流程



1) 接口方式（必须有 curl 示例）



创建角色的接口



示例请求（最小字段）



示例返回（关键字段）



角色保存到哪里



重名冲突如何处理（现有逻辑）



D. 世界 / 地图准备（最小可玩）



必须说明：



世界“静态文件”和“状态文件”的区别



它们各自的路径



如何使用已有 sample world 启动一局



世界状态何时、如何被更新



E. 从 0 到“走一步”的完整游玩流程（照做清单）



用顺序步骤写清楚：



配置模型 API（key / url / config 文件）



启动后端（真实启动命令）



打开前端（访问地址）



创建角色



启动/进入一个会话



发送第一条玩家输入（示例）



成功触发一次世界变化（移动）



验证：



会话文件有变化



世界状态文件有变化



F. 玩家输入示例（必须 ≥ 3 条）



示例类型必须覆盖：



纯观察 / 叙事



明确移动意图



与 NPC 对话（即使只是叙事）



示例风格偏“跑团玩家”，不要像测试指令。



G. 常见问题（Troubleshooting）



至少包含：



JSON 解析失败如何排查



角色创建失败 / 重名



世界状态不更新的检查路径



找不到 key / config 的情况



会话文件在哪里查看



2️⃣ 推荐的“最小可玩回合约定”（写进文档）



请在文档中给出一个非强制、但推荐的玩家输入约定，例如：



每次输入尽量包含：



意图（看 / 走 / 问 / 搜索）



目标（地点 / 人 / 物）



风格（谨慎 / 快速 / 隐蔽）



示例：



“我谨慎地沿着街道向北走，注意观察路口。”



“我向酒馆老板打听昨晚是否有陌生人进城。”



“我检查房间，寻找能派上用场的工具。”



3️⃣ 写文档前你必须核对的事实点



请从代码中确认，并在文档中写明：



实际启动命令



前端入口文件名与访问方式



角色文件保存路径



会话文件保存路径与命名方式



世界文件（static / state）的默认路径



世界移动接口的关键字段（不需要完整 schema）



4️⃣ 写作质量要求（强制）



只写现在已经存在、能用的功能



所有路径使用相对路径 + 运行期说明



所有示例命令可直接复制执行



每一步写清楚：



做什么



看到什么结果



面向“第一次接触该项目的人”



5️⃣ 交付要求



生成：docs/PLAY_GUIDE_MIN.md



如有必要，可附加一个简短附录列出接口字段（但不是必须）



不要修改代码，除非明确指出“否则无法游玩”



完成后停下，不要继续扩展设计。