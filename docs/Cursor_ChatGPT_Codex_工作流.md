# Cursor + ChatGPT Plus（Codex）联合开发工作流（新手向）

> 目标：  
> 在 **Cursor 主导真实开发** 的前提下，最大化利用 **ChatGPT Plus / Codex** 的思考与规划能力，  
> **避免 token 浪费、避免功能膨胀、避免 Agent 失控**。

---

## 一、总体原则（先记住）

**一句话原则**

> ChatGPT / Codex 负责「想清楚」  
> Cursor Agent 负责「动手做」

**铁律**
- 真实代码仓库 **只允许 Cursor 打开和修改**
- Codex **永远不直接参与代码执行**
- 一个任务 = 一个最小可交付单元

---

## 二、工具角色划分（固定不变）

| 工具 | 角色 | 允许做的事 | 禁止做的事 |
|----|----|----|----|
| ChatGPT Plus（普通） | 教练 | 解释概念、补基础、回答“为什么” | 参与真实项目 |
| **ChatGPT Plus（Codex）** | **策划 / 提示词工厂** | 拆任务、写规则、写提示词、写验收标准 | 读完整代码仓库 |
| **Cursor Pro（Agent）** | **唯一执行者** | 改文件、跑命令、给结果 | 自行扩展需求 |

---

## 三、你真正要掌握的「黄金工作流」

### 每一个功能，都严格走这 6 步

---

### Step 0：只在 Codex 中做（不碰代码）

**目的**：把需求压缩到「不能再小」

你要问 Codex 的不是：
> 怎么把功能做完整？

而是：
> 这个功能的 **最小可用版本** 是什么？

**产出**
- 功能一句话描述
- 明确“不做什么”（至少 3 条）

---

### Step 1：Codex 拆成 Agent 单元任务

**标准粒度**
- 后端：1 个接口 或 1 个逻辑点
- 前端：1 个页面 或 1 个组件
- 有时只有后端，没有前端

**要求**
- 一个 Agent 任务，10～20 分钟人类也能完成
- 超过这个规模，必须再拆

---

### Step 2：Codex 生成「强约束 Agent 提示词」

这是 Codex 最核心的价值。

**提示词必须包含**
- 目标（只做一件事）
- 可修改目录
- 明确禁止事项
- 验收方式（命令 / 行为）

**原则**
> 提示词越冷酷，Agent 越省 token

---

### Step 3：进入 Cursor，只做一件事

**在 Cursor 中**
- 粘贴 Codex 给你的提示词
- @ 只选最少的相关文件
- 启动 Agent
- 不讨论、不追加需求

---

### Step 4：Agent 执行并验证

Agent 应该输出：
- 改了哪些文件
- 是否通过测试 / 构建
- 是否满足验收标准

如果没通过：
- **只允许修失败点**
- 不允许“顺手优化”

---

### Step 5：立刻停（非常重要）

满足以下任一条件，就停：
- 功能能跑
- 验收通过
- 达到最小可用标准

👉 **不要在 Cursor 里追求“更好”**

---

## 四、Codex 的「压榨式使用场景清单」

### 强烈推荐使用 Codex 的地方

1. 需求裁剪（删功能）
2. 任务拆分（变小）
3. Agent 提示词生成
4. 接口契约 / 验收说明
5. 事后审计（是否过度设计）

### 绝对不要用 Codex 的地方

- 读取完整项目结构
- 输出“直接粘贴即可运行”的完整实现
- 与 Cursor 同时做同一件事
- 反复修改同一功能

---

## 五、Cursor Agent 的使用守则

### 什么时候用 Agent
- 涉及多个文件
- 需要跑命令验证
- 手改容易出错

### 什么时候不用 Agent
- 单文件小改
- 文本替换
- 重命名

---

## 六、推荐的 Agent 提示词模板（通用）

### 后端 Agent 模板

```
任务：
- 实现：XXX（按已有契约）
- 目标：最小可用版本

范围：
- 只允许修改 backend/** 和 backend/tests/**
- 不得修改其他目录

禁止：
- 不重构现有架构
- 不引入新依赖
- 不新增非验收功能

流程：
1. 先给执行计划（涉及文件 + 验证方式）
2. 再实现
3. 运行验证命令

验收：
- 所有测试通过
```

---

### 前端 Agent 模板

```
任务：
- 实现：XXX 页面 / 组件
- 目标：能用即可

范围：
- 只允许修改 frontend/**

禁止：
- 不调整全局样式
- 不更换组件库
- 不做交互优化

验收：
- 页面可用
- 构建 / 测试通过
```

---

## 七、新手最重要的止损认知

> **80% 的浪费，来自“本来已经够用了，但你没停”。**

- 停止，是开发技能
- 控制 Agent，比优化代码更重要

---

## 八、最终总结（记住这三句话）

1. Codex 用来 **想清楚**
2. Cursor 用来 **执行一次**
3. 功能完成后 **立刻停**

---

这套流程一旦形成习惯，你会发现：
- token 用量下降
- 功能更可控
- 心理负担更小
