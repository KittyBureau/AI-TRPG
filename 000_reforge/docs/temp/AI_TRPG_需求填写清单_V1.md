# AI 跑团产品｜需求填写清单（V1）

> 使用说明：  
> 本文档用于**产品需求梳理**，不是技术设计文档。  
> 请用**自然语言**回答问题，站在“用户会怎么用、想看到什么”的角度，不需要考虑实现方式。  
> 不确定的地方可以留空或写“暂不确定”。

---

## 一、产品整体定位

### 1.1 这个产品是用来做什么的？
- （示例：用于进行可持续的 AI 跑团游戏，支持角色、世界和规则状态）

> 你的描述：
一个AI跑团游戏。底层由存储的数据进行控制，以避免全文上下文占用过多token，保证对话的准确性和持久性。

### 1.2 你希望用户把它当成什么？（可多选 / 自由描述）
- [ ] 游戏  
- [ ] 跑团主持人（GM）  
- [ ] 规则引擎  

> 补充说明：
用户应当能在一定范围内自定义规则，例如世界背景，角色卡，数值能力等。

### 1.3 你最不希望它变成什么？
- （示例：不可控的胡编聊天、状态前后矛盾的故事生成器）

> 你的描述：
不可控的胡编聊天，状态前后矛盾的故事生成器。
---

## 二、目标用户与使用场景

### 2.1 谁会使用这个产品？
- （示例：单人玩家 / 规则设计者 / 写作爱好者）

> 用户画像描述：
一到四个使用同一设备的跑团玩家。

### 2.2 用户通常在什么情况下使用？
- （示例：碎片时间游玩 / 长时间沉浸式游玩 / 测试规则）

> 使用场景描述：
碎片时间游玩，应当能随时继续一次历史跑团。

### 2.3 一次“典型使用流程”是怎样的？
请用 3–6 步自然语言描述：

> 示例：  
> 1. 打开网页  
> 2. 选择角色  
> 3. 输入行动  
> 4. 查看结果  

> 你的流程描述：
打开网页
设置规则
生成世界背景故事
生成当前战役的地图
生成玩家角色
选择世界背景故事
选择战役地图
选择玩家角色
开始跑团
输入对话文本
获得反馈结果
---

## 三、会话（跑团过程）相关需求

### 3.1 什么是“一局游戏 / 一次跑团”？
- 它从什么时候开始？
- 在什么情况下结束（如果有）？

> 描述：
玩家从创建一个战役开始。一个战役可以选择世界背景故事，选择地图，选择玩家角色。
在玩家完成战役的设置并点击创建时，应生成一个合理的终极目标，所有后续内容指向这一目标。当玩家完成目标或是无法继续战役（生命归零或是被永久限制自由）时，结束游戏。

### 3.2 用户是否需要：
- [ ] 新建会话  
- [ ] 继续上次会话  
- [ ] 同时存在多个会话  
- [ ] 手动切换会话  

> 补充说明：
这里的会话也就是我提到的战役。用户可以新建会话，继续会话，同时进行多个对话（读取不同存档的本地数据），手动切换会话（非AI控制，应是玩家在前端或后端的操作来切换）

### 3.3 如果用户中断，下次回来你希望发生什么？
- （示例：自动加载上一次状态）

> 描述：
从默认的起始页界面开始。在起始页上，如果玩家想继续，可以手动选择上一次会话。
---

## 四、角色（Character）相关需求

### 4.1 角色在产品中的作用是什么？
- （示例：玩家的唯一行动主体）

> 描述：
角色是玩家的唯一行动主体，和世界数据交互的载体，其生命值也作为游戏结束的依据。

### 4.2 用户是否需要：
- [ ] 创建角色  
- [ ] 查看角色信息  
- [ ] 修改角色信息  
- [ ] 在不同会话中复用角色  

> 补充说明：
用户需要能创建角色，查看角色信息，修改角色信息，在不同会话中复用角色  

### 4.3 角色有哪些你“认为必须存在”的信息？
- （示例：姓名、血量、职业、背景）

> 字段描述（自然语言即可）：
姓名，称号，背景，职业，种族，血量，技能（现实技能，例如开锁、开车等），能力值（力量、敏捷、智力，用于一些行动的成功率判断，类似DND）
---

## 五、世界 / 地图相关需求

### 5.1 世界在产品中意味着什么？
- （示例：故事发生的空间与规则载体）

> 描述：
世界是故事的背景，提供各类事件的可信基础。世界是空间载体，玩家应能够在给定的不同区域移动。

### 5.2 用户是否需要明确“位置 / 移动”概念？
- [ ] 需要明确位置  
- [ ] 需要规则化移动  
- [ ] 只需要叙事层面的空间  

> 说明：
玩家的位置应处在世界地图的一个区域内，在不同区域移动需要在规则允许的情况下进行（区域移动锁），例如玩家原理当前区域出口时，应被禁止切换区域。各区域间由抽象的路径联系。在一个区域内部的具体位置则由上下文关键词控制。

### 5.3 地图是：
- [ ] 必须  
- [ ] 可选  
- [ ] 未来再考虑  

> 补充说明：
必须
---

## 六、规则与设置（Settings）需求

### 6.1 你希望哪些内容是“可配置的”？
- （示例：血量规则、是否启用地图、文本压缩）

> 可配置项列表（自然语言）：
文本压缩：如果玩家对压缩后的准确度不满意，可以采用全文上下文，但是token量会增加。
血量规则：可选血量归零后不强制结束，允许GM创造特殊事件来继续游戏。
存档数量：可选最多N段对话退回，从前面开始重新进行游戏

### 6.2 这些设置通常在什么时候修改？
- [ ] 会话开始前  
- [ ] 会话过程中  
- [ ] 很少修改  

> 说明：
会话过程中允许修改。

### 6.3 你是否希望不同会话使用不同规则？
- [ ] 是  
- [ ] 否  
- [ ] 暂不确定  

---
是，每个会话要有独立设置。
## 七、AI 行为与对话体验

### 7.1 你期望 AI 扮演什么角色？
- （示例：严格遵守规则的主持人）

> 描述：
严格遵守规则的主持人。如果需要提供其他角色的话语，只能以叙述的角度。

### 7.2 你是否区分不同类型的对话？
- [ ] 场景描写  
- [ ] 行动结算  
- [ ] 规则说明  
- [ ] 自由聊天  

> 说明：
需要区分。主对话区域应能进行的对话有：场景描写，行动询问，规则说明，自由聊天。信息日志区域应能输出战斗信息、世界信息等，例如「角色A」使用「石头」对「角色B」造成「1」伤害，战斗信息由主对话AI返回的值被读取后，调用战斗服务自动生成。

### 7.3 哪些行为你**绝对不希望 AI 擅自做**？
- （示例：擅自修改血量、跳过规则）

> 描述：
擅自修改血量，改写角色背景，改写世界规则，改写地图地点
---

## 八、状态与可信度

### 8.1 哪些信息你认为“必须是系统说了算”？
- （示例：血量、位置、角色存活状态）

> 描述：
血量，地图位置，角色存活状态

### 8.2 如果 AI 输出与系统状态冲突，你希望：
- [ ] 系统状态优先  
- [ ] 提示用户  
- [ ] 自动纠正 AI 描述  

> 说明：
如有冲突，则拦截本次回复，并重新发送上一次对话，用对话builder附加一段debug信息，让AI知道哪里出了问题。
---

## 九、未来与边界（非常重要）

### 9.1 你**短期（1–2 周）一定要实现的功能**：
- 列表：
基本对话，上下文全文，上下文关键词压缩，Responce调用本地工具（人物在地图上的移动，血量修改），地图生成器（创建本次战役的地点边界和路径。地点应允许存在细分层级，地点的下层子地图要能在对话进行中进行二次生成），人物生成器（根据用户的要求创建人物卡。提示词由固定的系统提示词和用户提示词组成）

### 9.2 你明确 **现在不做 / 不考虑** 的内容：
- 列表：
前端展示

### 9.3 你最担心这个产品未来变成什么样？
- （示例：越改越乱，不敢动）

> 描述：
功能难以扩展，过量耦合。功能难以修改，牵一发动全身。
---

## 十、补充说明
任何你觉得重要、但上面没问到的内容：

> 自由填写：
需要明确不同服务和工具的接口和用法。各功能在完成后要写文档便于长期开发。文档需要给AI agent和人类阅读，考虑分两类文档写。在开始程序设计前，尽可能和使用者明确可能造成功能延伸的需求。需要控制功能的边界，不要过度设计。
---

填写完成后，请将本文档交回，我将：
1. 审核需求一致性与冲突  
2. 抽象出清晰的产品功能边界  
3. 输出可直接用于系统设计与 AI Coding 的产品规格说明
